## 移动端开发

### 1.1 基础

* 说出 移动web的开发现状
* 写出 标准的viewport
* 使用 移动web的调试方法
* 说出 移动端常见的布局方案

### 1.2 开发现在

* 手机浏览器：内核，国产手机浏览器主流主流webkit，处理兼容目标。
* 手机分辨率：多样化，市场上的2K，K：kilometer 举例：iPhone-1242x2208，了解下；
* 手机屏幕：宽高，单位PX；



## 1.

* 
* 
* 能够使用
* 能够说出
* 能够描述流式布局
* 能够独立完成京东移动端首页

## 2.现状了解

* 
* 手机现状：碎片化多，各种分辨率，就是传说中的2K、4K屏，K就是千级别的像素的屏幕。我们开发就使用的是px（长度单位）；像素是的单位是个。核心点就是知道什么像素级别怎么写图片等的大小。

## 3.调试
> 1. Chrome DevTools（谷歌浏览器）的模拟手机调试;(接下来就带下演示下调试的过程)
> 2. 搭建本地web服务器，手机和服务器一个局域网内，通过手机访问服务器
> 3. 使用外网服务器，直接IP或域名访问；


## 4.视口

### 4.1 问题

* PC端的页面放在手机上显示，我们会看到页面缩小，字体小，需要用手指滑动划看。

### 4.2 布局视口

* 布局视口：一般移动设备的浏览器都默认设置了一个布局视口，用于解决早期的PC端页面在手机上显示的问题。iOS, Android基本都将这个视口分辨率设置为 980px，所以PC上的网页大多都能在手机上呈现，只不过元素看上去很小，一般默认可以通过手动缩放网页。PC端宽度，就是我们屏幕的宽度，总是比手机屏幕大，移动端浏览器为了解决PC页面显示问题，默认一个宽度980px;手机初始让我全部看到，那只能是缩小。我们通过捏屏幕，缩放；
* 关键词：默认980px；（body的宽）

<img src = './img/3.png'>

### 4.3 视距视口

* 视距视口：字面意思，它是用户正在看到的网站的区域。注意：是网站的区域。我们可以通过缩放去操作视觉视口，但不会影响布局视口，布局视口仍保持原来的宽度。
* 关键词：手机屏幕多大，你能看到的多大；

### 4.4 理想视口

* 理想视口：为了使网站在移动端有最理想的浏览和阅读宽度而设定；对设备来讲，布局视口成为视口尺寸是最为理想的情况；
* 关键词：就是布局视图默认980px 改为 手机屏幕宽度的px。我们能最舒服最合理的看到所有页面，不需要捏着放大缩小。

### 4.5 视口总结

> 1. 布局视口：移动端默认body宽为980px;
> 2. 视图视口：手机多大，我们就能看到多少范围；
> 3. 理想视口：设置把默认的980px 为 手机屏幕的宽度。meta标签设置；

### 4.6 设置

* 标准语法：
```html
<meta name="viewport" content="width=device-width, user-scalable=no,         initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
```
* 关键点：设置`width=device-width`就是把默认的980px改为手机屏幕的宽度;

* 其他属性：
> 1. user-scalable: 用户使用缩放，是否允许用户缩放屏幕
> 2. initial-scale：显示比例;1：全部显示；
> 3. maximum-scale：最大缩放比例
> 4. minimum-scale=1.0 最小缩放比例；

## 5. 二倍图

### 5.1 问题

* 同样的图片在手机上显示比较模糊

### 5.2 物理像素

* 真是存在的，手机屏幕一直在更新，技术更新在同样的屏幕宽度上，能挤下更多的物理像素。
* 关键词：像素单位是个，开发宽度单位是PX（长度单位）；

### 5.3 分辨率

* 卖手机宣传里面分辨率，说的就是在手机某个尺寸宽度（开发单位：px）下，挤了多少个物理像素；* 关键词：屏幕的宽度高度方向上挤了挤了多少个物理像素；

### 5.4 物理像素比

* 物理像素比：在PC上，1px对应电脑屏幕上1个px；手机有可能就是1px里挤了多个像素。比如1px在iPhone8下就挤了2个像素，那么像素比例就是2；手机像素750，而屏幕宽度375px。

<img src = './img/2.png'>

### 5.5 市场上的开发尺寸和物理像素比

<img src = './img/1.png'>

### 5.6 图片在手机上为什么会模糊

* 回到问题：对于一张 50px * 50px 的图片,在手机Retina屏中打开,设置img宽度多大，还是会多少的px，只不过是在PC上1px对应1个物理像素，在移动端是1px对应2个物理像素，屏幕要求是显示的更加细腻，但是我们图片没有达到相应的细腻的要求的程度，所以才会出现模糊；
* 而纯颜色的块和文字就不会；

### 5.7 解决模糊：二倍图

* Retina：PC端 和 早前的手机屏幕 / 普通手机屏幕:  1CSS像素  =  1 物理像素的；Retina（视网膜屏幕）是一种显示技术，可以将把更多的物理像素点压缩至一块屏幕里，从而达到更高的分辨率，并提高屏幕显示的细腻程度。摩托罗拉开发的，由苹果发扬光大；
* 因为iPhone 6\7\8 的影响,但是现在还存在3倍图4倍图的情况，这个看实际开发公司需求。
* 关键点：为了适合手机的细腻度，需要准备2倍设计尺寸的图，但是我们仍然设置为代码宽高为设计要求的大小，现在就满足屏幕的细腻度对图片的要求，即满足1px含2个物理像素的色彩要求；

### 5.8 background-size

* 语法：
```css
div {
    width: 500px;
    height: 500px;
    border: 2px solid red;
    background: url(images/dog.jpg) no-repeat;
    /* background-size: 图片的宽度 图片的高度; */
    /* background-size: 500px 200px; */

    /* 1.只写一个参数 肯定是宽度 高度省略了  会等比例缩放 */
    /* background-size: 500px; */

    /* 2. 里面的单位可以跟%  相对于父盒子来说的 */
    /* background-size: 50%; */
    
    /* 3. cover 等比例拉伸 要完全覆盖div盒子  可能有部分背景图片显示不全
    关键词：等比缩放，绝对没有留白；
     */
    /* background-size: cover; */
    
    /* 4. contain 高度和宽度等比例拉伸 当宽度 或者高度 铺满div盒子就不再进行拉伸了 可能有部分空白区域 
    关键词：等比缩放，显示全面，可能留白 */
    background-size: contain;
}
```
* 所以根据2倍图的理解，background-size同样也可以进行二倍图的设置和使用；

### 5.9 总结

> 1. 理解手机屏幕1px包含几个物理像素点；
> 2. 根据已知物理像素比和公司的业务要求， 理解使用2倍或多倍图的原因；

## 6.移动端开发选择

### 6.1 方案的选择

* 单独制作移动端页面：通过判断当前的是PC还是移动端的设备。转相应的页面。演示：点同一个网站的不同转跳；
* 响应式：一个页面，响应式的。演示下三星的官方
* 看公司要求，没要求还是单独制作，单独针对做响应的调试；

### 6.2 初始化技术解决方案

* 浏览器：移动端浏览器基本以 webkit 内核为主，因此我们就考虑webkit兼容性问题。我们可以放心使用 H5 标签和 CSS3 样式。同时我们浏览器的私有前缀我们只需要考虑添加 webkit 即可；

* 样式初始化：移动端 CSS 初始化推荐使用 normalize.css/ 官网地址： http://necolas.github.io/normalize.css/

* 移动端的盒子模型：box-sizing

> 1. 传统模式宽度计算：盒子的宽度 =  CSS中设置的width + border + padding 
> 2. CSS3盒子模型：盒子的宽度 =  CSS中设置的宽度width 里面包含了 border 和 padding 。我们的CSS3中的盒子模型， padding 和 border 不会撑大盒子了，会向内部进行撑盒子；

* 设置特殊样式

```css
    div{
        /*CSS3盒子模型*/
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
    }

    /*点击高亮我们需要清除清除  设置为transparent 完成透明*/
    *{
        -webkit-tap-highlight-color: transparent;
    }


    input,button{
    /*在移动端浏览器默认的外观在iOS上加上这个属性才能给按钮和输入框自定义样式
    去除手机端的默认样式；
    */
    -webkit-appearance: none;
    }


    /*禁用长按页面时的弹出菜单*/
    img,a{ 
      -webkit-touch-callout: none; 
    }

    a{
    color: #666;
    text-decoration: none;
    }

    /*去除图片底部空白 */
    img {
        vertical-align: middle;
    }

```

## 7.移动端布局

### 7.1 方案的确认

* 技术选型：单独制作页面，还是响应式布局
* 单独制作页面：流式布局（百分比）、felx布局（强烈推荐）、rem、混合布局；
* 响应式布局：媒体查询、bootstrap


### 7.2 流式布局

* 流式布局： 百分比布局，也称非固定像素布局。通过盒子的宽度设置成百分比来根据屏幕的宽度来进行伸缩，不受固定像素的限制，内容向两侧填充。流式布局方式是移动web开发使用的比较常见的布局方式。
* 伸缩保护：设置最大宽度，最小宽度；
> 1. max-width   最大宽度 （max-height  最大高度）；
> 2. min-width    最小宽度 （min-height  最小高度）；

## 8.京东首页demo

### 8.1 初始化工作

1. 确认方案：单独制作，流式布局；
2. 搭建文件结构：

<img src='./img/5.png'/>

3. 设置viewport，初始化CSS;

```html
<meta name="viewport" content="width=device-width, user-scalable=no,initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

<link rel="stylesheet" href="css/normalize.css">
<link rel="stylesheet" href="css/index.css">
```

### 8.2 核心点

> 1. 所有的移动端布局的核心思路，先看这个模块要不要设置高度，就是高度是否是固定的，没有高度的时候，就绝对是靠内部子项撑起来的。
```css
/* 新闻版块 */
/* 没有设置高度，高度靠内部子项往外侧撑 */
.news {
  margin-top: 20px;
}
.news img {
  width: 100%;
}

.news a {
  float: left;
  box-sizing: border-box;
}
.news a:nth-child(1) {
  width: 50%;
}

/* n+2 就是从从2个往后面选，注意一些选择器的巧妙使用 */
.news a:nth-child(n+2) {
  width: 25%;
  border-left: 1px solid #ccc;
}


/* 导航模块 */
nav {
  padding-top: 5px;
}
/* 这个也没有设置高度，高度靠内部子项往外撑 */
nav a {
  float: left;
  width: 20%;
  /* 图片和字体一样，可以居中 */
  text-align: center;
}

nav a img {
  width: 40px;
  margin: 10px 0;
}

nav a span {
  display: block;
}
```
> 2. 注意移动端：body、定固定定位的元素设置伸缩保护。
> 3. 盒子默认是100%宽度定位，搜索区使用margin内部吃空间进行定位和宽度的获取；盒子设置margin-top，会超出父级的盒子带出去，使用父级盒子overflow:hiden。（BFC）;

> 4. img行内块，设置行内块和文字进行中线对齐，`vertical-align: middle`，也可以和文字进行居中对齐，`text-align: center`。
> 5. 使用background设置图片,或img,学会2倍精灵图配合firework如何进行设置;
> 6. 某些左侧或右侧的线、或者简单的图标采用伪元素进行设置;
> 7. 修改搜索区为fixed定位，修改为定位后，里面的宽度响应的要设置100%宽度;
> 8. 注意CSS3盒子模型模型、伪类选择器的巧妙使用;
> 9. 流式布局的核心就是靠百分比进行划分模块，子项的宽度。
```css
/* 搜索 */

.search-wrap {
  /* 固定定位的，不设置top时，自动按照文档流进行布局 */
  position: fixed;
  overflow: hidden;
  width: 100%;
  height: 44px;
  min-width: 320px;
  max-width: 640px;
}

.search-btn {
  position: absolute;
  top: 0;
  left: 0;
  width: 40px;
  height: 44px;
}

.search-btn::before {
  content: "";
  display: block;
  width: 20px;
  height: 18px;
  background: url(../images/s-btn.png) no-repeat;
  background-size: 20px 18px;
  margin: 14px 0 0 15px;
}

.search-login {
  position: absolute;
  right: 0;
  top: 0;
  width: 40px;
  height: 44px;
  color: #fff;
  line-height: 44px;
}

.search {
  position: relative;
  height: 30px;
  background-color: #fff;
  /* 自由伸缩的部分，采用还是默认100%宽度，margin往内岁缩进的方式 */
  margin: 0 50px;
  border-radius: 15px;
  margin-top: 7px;
}

/* n+2 就是从从2个往后面选，注意一些选择器的巧妙使用 */
.news a:nth-child(n+2) {
  width: 25%;
  border-left: 1px solid #ccc;
}
```

